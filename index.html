
<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>Jinger - 个人主页</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root { --panel-bg: rgba(0,0,0,.35); --text:#f0f0f0; --link:#66ccff; --accent:#7cc0ff; }
    body { margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
           line-height:1.6; color:var(--text); background:#000214; }
    main { max-width:860px; margin:64px auto; padding:24px 20px; background:var(--panel-bg);
           backdrop-filter:blur(3px); border-radius:14px; position:relative; z-index:0; }
    header, footer { text-align:center; margin-bottom:40px; }
    nav a { margin:0 8px; text-decoration:none; color:var(--link); }
    section { margin-bottom:40px; } ul { padding-left:20px; }
    footer { color:#aaa; font-size:14px; margin-top:60px; }
    .hud{ position:fixed; top:14px; right:14px; z-index:10; display:grid; gap:8px; grid-template-columns:auto auto;
          align-items:center; background:rgba(0,0,0,.5); border:1px solid rgba(255,255,255,.18); border-radius:12px;
          padding:10px 12px; backdrop-filter:blur(6px); font-size:13px; }
    .hud select,.hud input[type="range"],.hud button{ background:rgba(255,255,255,.06); color:var(--text);
          border:1px solid rgba(255,255,255,.2); border-radius:8px; padding:6px 8px; font-size:13px; }
    .hud .wide{ grid-column:1 / -1; } .hud .muted{ opacity:.7; font-size:12px; }
  </style>
</head>
<body>
  <canvas id="bg" style="position:fixed;inset:0;z-index:-2;display:block;"></canvas>
  <div aria-hidden="true" style="position:fixed;inset:0;
       background:radial-gradient(ellipse at 50% 70%, rgba(0,10,30,.25), rgba(0,0,0,.62)); z-index:-1;"></div>

  <div class="hud" role="region" aria-label="背景设置">
    <label for="mode">模式</label>
    <select id="mode" aria-label="背景模式选择">
      <option value="chaos">A 混沌三体轨迹</option>
      <option value="eclipse">B 掩星日食</option>
      <option value="emblem">C 三日凌空符号</option>
    </select>
    <label for="intensity">强度</label>
    <input id="intensity" type="range" min="0" max="100" step="1" value="60" aria-label="动画强度">
    <button id="toggle" class="wide" aria-pressed="true">关闭背景动画</button>
    <div class="muted wide">提示：设置已自动保存；系统“减少动态效果”将默认关闭动画。</div>
  </div>

  <main>
    <header>
      <h1>Jinger</h1>
      <p>博士申请者｜研究方向：资产定价、微观理论、金融科技</p>
      <nav>
        <a href="#about">关于我</a>
        <a href="#research">研究方向</a>
        <a href="#articles">文章</a>
        <a href="#contact">联系</a>
      </nav>
    </header>

    <section id="about">
      <h2>关于我</h2>
      <p>你好，我是 Jinger，正在准备博士申请。我关注资产定价、微观理论和金融科技，同时也记录一些研究想法和思考。</p>
      <p><a href="CV.pdf" target="_blank">下载我的简历（PDF）</a></p>
    </section>

    <section id="research">
      <h2>研究方向</h2>
      <ul>
        <li>资产定价的理论与实证研究</li>
        <li>微观经济理论与市场行为</li>
        <li>金融科技</li>
      </ul>
    </section>

    <section id="articles">
      <h2>文章与想法</h2>
      <ul>
        <li><a href="#">理论模型</a>（2025-06）</li>
        <li><a href="#">数据处理</a>（2025-08）</li>
        <li><a href="#">博士申请准备</a>（草稿）</li>
      </ul>
    </section>

    <section id="contact">
      <h2>联系我</h2>
      <p>邮箱：<a href="mailto:guoj.24@pbcsf.tsinghua.edu.cn">guoj.24@pbcsf.tsinghua.edu.cn</a></p>
      <p>GitHub：<a href="https://github.com/jingeriiing" target="_blank">jinger</a></p>
    </section>

    <footer><p>© 2025 Jinger. All rights reserved.</p></footer>
  </main>

  <script>
  (function(){
    const canvas = document.getElementById('bg');
    const ctx = canvas.getContext('2d');
    const dpr = Math.min(window.devicePixelRatio || 1, 2);
    const selMode = document.getElementById('mode');
    const rangeIntensity = document.getElementById('intensity');
    const btnToggle = document.getElementById('toggle');
    const key = 'bg-state-v1';
    const prefersReduced = (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) || false;
    let saved = null;
    try { saved = JSON.parse(localStorage.getItem(key) || 'null'); } catch (_) { saved = null; }
    const state = { running: saved?.running ?? (!prefersReduced), mode: saved?.mode ?? 'chaos', intensity: saved?.intensity ?? 60 };

    // URL 强制参数：?bg=on/off &mode=chaos|eclipse|emblem
    try {
      const usp = new URLSearchParams(location.search);
      const bgParam = usp.get('bg');
      const modeParam = usp.get('mode');
      if (bgParam === 'on')  state.running = true;
      if (bgParam === 'off') state.running = false;
      if (modeParam && ['chaos','eclipse','emblem'].includes(modeParam)) {
        state.mode = modeParam;
      }
    } catch(_) {}


    selMode.value = state.mode; rangeIntensity.value = state.intensity;
    btnToggle.setAttribute('aria-pressed', state.running);
    btnToggle.textContent = state.running ? '关闭背景动画' : '开启背景动画';

    function persist(){ localStorage.setItem(key, JSON.stringify(state)); }
    function resize(){ canvas.width=Math.floor(innerWidth*dpr); canvas.height=Math.floor(innerHeight*dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0); if(!state.running){ ctx.fillStyle='#000214'; ctx.fillRect(0,0,innerWidth,innerHeight);} }
    addEventListener('resize', resize, {passive:true}); resize();

    function makeStars(n){ return Array.from({length:n},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*1.2+.3,a:Math.random()*Math.PI*2,s:Math.random()*.2+.05})); }

    function Chaos(){ const stars=makeStars(240);
      const suns=[{x:innerWidth*.52,y:innerHeight*.45,r:3.2,hue:40,phase:Math.random()*6.28},
                  {x:innerWidth*.48,y:innerHeight*.52,r:2.6,hue:12,phase:Math.random()*6.28},
                  {x:innerWidth*.55,y:innerHeight*.50,r:2.0,hue:200,phase:Math.random()*6.28}];
      let t=0; return { step(intensity){ const k=intensity/60; t+=0.016*k;
        ctx.fillStyle='rgba(0,2,10,0.18)'; ctx.fillRect(0,0,innerWidth,innerHeight);
        for(const s of stars){ s.a+=s.s*(.8+.6*k); const tw=(Math.sin(s.a)*.5+.5)*.6+.2;
          ctx.globalAlpha=tw; ctx.fillStyle='#cfd8ff'; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill();}
        ctx.globalAlpha=1;
        suns.forEach((s,i)=>{ const R1=(60+22*Math.sin(t*.7+i))*(.8+.5*k), R2=(90+18*Math.cos(t*.5+i*1.7))*(.8+.5*k);
          s.x=innerWidth/2+Math.cos(t*.6+s.phase)*R2+Math.sin(t*.9+i)*R1*.6;
          s.y=innerHeight/2+Math.sin(t*.6+s.phase)*R2*.7+Math.cos(t*.7+i)*R1*.5;
          const grd=ctx.createRadialGradient(s.x,s.y,0,s.x,s.y,140);
          grd.addColorStop(0,`hsla(${s.hue},95%,65%,.95)`); grd.addColorStop(.2,`hsla(${s.hue},90%,55%,.35)`); grd.addColorStop(1,'rgba(0,0,0,0)');
          ctx.fillStyle=grd; ctx.beginPath(); ctx.arc(s.x,s.y,140,0,Math.PI*2); ctx.fill();
          ctx.fillStyle=`hsl(${s.hue},95%,90%)`; ctx.beginPath(); ctx.arc(s.x,s.y,s.r*3,0,Math.PI*2); ctx.fill();});
        ctx.globalAlpha=.18; ctx.strokeStyle='rgba(180,200,255,.5)'; ctx.lineWidth=.6; ctx.beginPath();
        suns.forEach((s,i)=>{ i?ctx.lineTo(s.x,s.y):ctx.moveTo(s.x,s.y);}); ctx.closePath(); ctx.stroke(); ctx.globalAlpha=1; } } }

    function Eclipse(){ const stars=makeStars(180); let t=0, phase=Math.random()*6.28; const sweepR=Math.max(innerWidth,innerHeight)*.75;
      return { step(intensity){ const k=intensity/60; t+=0.012*(.8+.8*k);
        ctx.fillStyle='rgba(0,5,18,0.25)'; ctx.fillRect(0,0,innerWidth,innerHeight);
        for(const s of stars){ s.a+=s.s*(.6+.4*k); const tw=(Math.sin(s.a)*.5+.5)*.5+.25;
          ctx.globalAlpha=tw; ctx.fillStyle='#d6ddff'; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); }
        ctx.globalAlpha=1;
        const cx=innerWidth*.5+Math.cos(t*.4+phase)*120, cy=innerHeight*.48+Math.sin(t*.4+phase)*80;
        const grd=ctx.createRadialGradient(cx,cy,0,cx,cy,260); grd.addColorStop(0,'rgba(255,240,200,.85)');
        grd.addColorStop(.3,'rgba(255,200,120,.35)'); grd.addColorStop(1,'rgba(0,0,0,0)');
        ctx.fillStyle=grd; ctx.beginPath(); ctx.arc(cx,cy,260,0,Math.PI*2); ctx.fill();
        const mx=innerWidth*.5+Math.cos(t*.7+phase)*220*(.8+.4*k), my=innerHeight*.5+Math.sin(t*.7+phase*1.2)*160*(.8+.4*k);
        ctx.fillStyle='rgba(0,0,0,.9)'; ctx.beginPath(); ctx.arc(mx,my,sweepR*.32,0,Math.PI*2); ctx.fill();
        ctx.globalAlpha=.25; ctx.fillStyle='rgba(80,120,255,.5)'; ctx.beginPath(); ctx.arc(innerWidth*.2,innerHeight*.8,200,0,Math.PI*2); ctx.fill();
        ctx.fillStyle='rgba(255,120,80,.35)'; ctx.beginPath(); ctx.arc(innerWidth*.8,innerHeight*.2,180,0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1; } } }

    function Emblem(){ let t=0; return { step(intensity){ const k=intensity/60; t+=0.01*(.7+.9*k);
      ctx.fillStyle='rgba(0,2,10,1)'; ctx.fillRect(0,0,innerWidth,innerHeight);
      const cx=innerWidth/2, cy=innerHeight/2, R=Math.min(innerWidth,innerHeight)*.22, a=t*.6;
      ctx.strokeStyle='rgba(160,200,255,.45)'; ctx.lineWidth=2; ctx.beginPath(); ctx.arc(cx,cy,R,0,Math.PI*2); ctx.stroke();
      for(let i=0;i<3;i++){ const ang=a+i*2*Math.PI/3, x=cx+Math.cos(ang)*R, y=cy+Math.sin(ang)*R;
        const g=ctx.createRadialGradient(x,y,0,x,y,80); g.addColorStop(0,'rgba(180,220,255,.9)'); g.addColorStop(1,'rgba(0,0,0,0)');
        ctx.fillStyle=g; ctx.beginPath(); ctx.arc(x,y,80,0,Math.PI*2); ctx.fill();
        ctx.fillStyle='rgba(230,240,255,.95)'; ctx.beginPath(); ctx.arc(x,y,6+2*k,0,Math.PI*2); ctx.fill(); }
      ctx.strokeStyle='rgba(120,160,255,.25)'; ctx.lineWidth=1; const tickR=R*1.12; ctx.beginPath();
      for(let i=0;i<90;i++){ const ang=i*(Math.PI*2/90)+a*.6; const x1=cx+Math.cos(ang)*(tickR-6), y1=cy+Math.sin(ang)*(tickR-6);
        const x2=cx+Math.cos(ang)*(tickR), y2=cy+Math.sin(ang)*(tickR); ctx.moveTo(x1,y1); ctx.lineTo(x2,y2);} ctx.stroke(); } } }

    const modes = {chaos:Chaos, eclipse:Eclipse, emblem:Emblem};
    let engine = modes[state.mode](); let rafId=0;

    function loop(){ if(!state.running) return; engine.step(Number(state.intensity)); rafId=requestAnimationFrame(loop); }
    function start(){
      if (state.running) return;
      state.running = true; persist();
      btnToggle.setAttribute('aria-pressed','true');
      btnToggle.textContent = '关闭背景动画';
      cancelAnimationFrame(rafId); // 保险：先取消潜在旧帧
      loop();                      // 进入主循环
    }

    function stop(){ if(!state.running) return; state.running=false; persist(); btnToggle.setAttribute('aria-pressed','false'); btnToggle.textContent='开启背景动画';
      cancelAnimationFrame(rafId); ctx.fillStyle='#000214'; ctx.fillRect(0,0,innerWidth,innerHeight); }
    btnToggle.addEventListener('click', ()=> (state.running?stop():start()));
    selMode.addEventListener('change', ()=>{
      state.mode = selMode.value; persist();
      cancelAnimationFrame(rafId);             // 先停掉旧循环
      engine = modes[state.mode]();            // 重建引擎
      ctx.fillStyle = '#000214'; ctx.fillRect(0,0,innerWidth,innerHeight); // 清屏
      if (state.running) loop();               // 若处于运行状态，立刻重启
    });

    rangeIntensity.addEventListener('input', ()=>{ state.intensity=Number(rangeIntensity.value); persist(); });

    // 首帧初始化
    if(state.running){ loop(); } else { stop(); }
  })();
  </script>
</body>
</html>

